<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://lanVoyager.github.io').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="To be dynamic, or not to be dynamic? That is the question. As a novice in this web/blog field, I even did NOT know the question exists. Static site was just chosen based on the GOOGLE search keyword ‘">
<meta name="keywords" content="Hexo">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo - Add View Count based on FireBase">
<meta property="og:url" content="https://lanVoyager.github.io/posts/2ef3ae62/index.html">
<meta property="og:site_name" content="lanVoyager | toHave-N-haveNot">
<meta property="og:description" content="To be dynamic, or not to be dynamic? That is the question. As a novice in this web/blog field, I even did NOT know the question exists. Static site was just chosen based on the GOOGLE search keyword ‘">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://drive.google.com/uc?export=download&id=1Xta3itrjiiTeeono-WJz6k7u28lLUCnA">
<meta property="og:image" content="https://drive.google.com/uc?export=download&id=1Y7JaKSfcDuS3HyZNC-ALUUCEjqXV4Z8r">
<meta property="og:image" content="https://drive.google.com/uc?export=download&id=1ugehD7bSPqvJCfSrm2eF5_KJHRkP4RKd">
<meta property="og:image" content="https://drive.google.com/uc?export=download&id=1LvyDVOUBD6IzNCo7oCugmvA38qW036Wp">
<meta property="og:image" content="https://drive.google.com/uc?export=download&id=1kg2YYcmpopzNeXlmqj4EZdH1h1o3rGqU">
<meta property="og:image" content="https://drive.google.com/uc?export=download&id=1NQYX3wa-OLWGs04ql1npEnJj6yEhlrqS">
<meta property="og:image" content="https://drive.google.com/uc?export=download&id=1b66I5KFpDIzG7v5JJw2P4-QbkHJLRip0">
<meta property="og:image" content="https://drive.google.com/uc?export=download&id=1fV4B8Lo-gb_YD7B9mpfEsW2f2JQWTq4x">
<meta property="og:updated_time" content="2020-01-14T18:24:25.475Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo - Add View Count based on FireBase">
<meta name="twitter:description" content="To be dynamic, or not to be dynamic? That is the question. As a novice in this web/blog field, I even did NOT know the question exists. Static site was just chosen based on the GOOGLE search keyword ‘">
<meta name="twitter:image" content="https://drive.google.com/uc?export=download&id=1Xta3itrjiiTeeono-WJz6k7u28lLUCnA">

<link rel="canonical" href="https://lanVoyager.github.io/posts/2ef3ae62/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Hexo - Add View Count based on FireBase | lanVoyager | toHave-N-haveNot</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">lanVoyager | toHave-N-haveNot</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">大道无形</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="https://lanVoyager.github.io/posts/2ef3ae62/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lanVoyager">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lanVoyager | toHave-N-haveNot">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hexo - Add View Count based on FireBase
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-14 21:24:17" itemprop="dateCreated datePublished" datetime="2019-08-14T21:24:17-07:00">2019-08-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-14 11:24:25" itemprop="dateModified" datetime="2020-01-14T11:24:25-07:00">2020-01-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/nerdyNotes/" itemprop="url" rel="index">
                    <span itemprop="name">nerdyNotes</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2.7k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>To be dynamic, or not to be dynamic? That is the question. As a novice in this web/blog field, I even did NOT know the question exists. Static site was just chosen based on the GOOGLE search keyword ‘How to create a personal blog’ when I started this blog. As a person knows some DTA stuff, let’s add some dynamic favor to this static site using Firestore by Google Cloud!</p>
<a id="more"></a>

<p><del>Day 35 with Hexo…</del></p>
<p>Maiden Voyager Day 1 (08-20-2019) @Fort Lauderdale Airport. See how I like this dynamic feature! I am writing this after 8 hours air-transportation since 0:50AM today! </p>
<p>The goal here is to display view counts (clicks on each of the post) in real time. How fancy, now it looks like some keywords in my dissertation. This requires dynamic, user interactive and probably a database to store the counts which are not built to <a href="https://en.wikipedia.org/wiki/Static_web_page" rel="external nofollow noopener noreferrer" target="_blank">static site</a>. To add this feature, we will deploy Firestore by Goolge Cloud service. Of course, there are many other similar services. For Chinese readers, there are lots of available resources online. Just Baidu it. After so many failures and denials by Chinese websites/services, I didn’t even bother to try those.</p>
<h1 id="The-Approach"><a href="#The-Approach" class="headerlink" title="The Approach"></a>The Approach</h1><p>Step 1: On <a href="https://firebase.google.com/" rel="external nofollow noopener noreferrer" target="_blank">Firebase</a>, create an account and a new project.</p>
<img src="https://drive.google.com/uc?export=download&id=1Xta3itrjiiTeeono-WJz6k7u28lLUCnA">

<p>Step 2: Create a database</p>
<img src="https://drive.google.com/uc?export=download&id=1Y7JaKSfcDuS3HyZNC-ALUUCEjqXV4Z8r">

<p>Step 3: modify <code>.\themes\next\\_config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">firestore:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  collection:</span> <span class="string">yourDatabaseName</span> <span class="comment"># Required, a string collection name to access firestore database</span></span><br><span class="line"><span class="attr">  apiKey:</span> <span class="string">seePic</span> <span class="comment"># Required</span></span><br><span class="line"><span class="attr">  projectId:</span> <span class="string">seePic</span> <span class="comment"># Required</span></span><br><span class="line"><span class="attr">  bluebird:</span> <span class="literal">false</span> <span class="comment"># Enable this if you want to include bluebird 3.5.1 (core version) Promise polyfill</span></span><br></pre></td></tr></table></figure>

<img src="https://drive.google.com/uc?export=download&id=1ugehD7bSPqvJCfSrm2eF5_KJHRkP4RKd">

<img src="https://drive.google.com/uc?export=download&id=1LvyDVOUBD6IzNCo7oCugmvA38qW036Wp">

<p>Step 4: Go back to Firebase console, enter <strong>Rules</strong> in <strong>Database</strong> section and slightly modify the code, and then <strong>Publish</strong> it.</p>
<img src="https://drive.google.com/uc?export=download&id=1kg2YYcmpopzNeXlmqj4EZdH1h1o3rGqU">

<p>Note: <a href="https://github.com/theme-next" rel="external nofollow noopener noreferrer" target="_blank">Hexo NexT</a> theme version should be above <code>v5.1.3</code>, otherwise you may encounter the issue that count numbers appear on index page. <a href="https://github.com/iissnan/hexo-theme-next/pull/1984" rel="external nofollow noopener noreferrer" target="_blank">Bug#1984</a> is fixed <a href="https://github.com/iissnan/hexo-theme-next/commit/3d4cccd048fd95bd7b5b10ac51c9180ea5341721" rel="external nofollow noopener noreferrer" target="_blank">here</a>.</p>
<p>Step 5: Deploy and you will find view icon with ‘view count’ in real time on your blog. Also, you can check the database in Firebase to for the real-time count data. As Lan being in the ‘static world’, this feature is REALLY COOL for the first time I implemented probably a week ago. I was very proud of myself. It was not a trivial task and I spent sometime Goolging for the solution to add view count and finally reside on Fi. The n-th time complaint, still a lot easier than the trial to connect mainland China which is still a failure as of today!<img src="https://drive.google.com/uc?export=download&id=1NQYX3wa-OLWGs04ql1npEnJj6yEhlrqS"> </p>
<img src="https://drive.google.com/uc?export=download&id=1b66I5KFpDIzG7v5JJw2P4-QbkHJLRip0">

<h1 id="Cosmetic-Issue"><a href="#Cosmetic-Issue" class="headerlink" title="Cosmetic Issue"></a>Cosmetic Issue</h1><p>There is a minor issue with ‘Abstract’ and ‘View Icon’.</p>
<p>If the <a href="https://lanvoyager.github.io/posts/a6eb593f">abstract</a> was added by adding ‘description’ in the front-matter. The location of view icon in the post page (if you click ‘MORE’) will be placed after the abstract. </p>
<img src="https://drive.google.com/uc?export=download&id=1fV4B8Lo-gb_YD7B9mpfEsW2f2JQWTq4x">

<p>To avoid this, use <code>&lt;!-- more --&gt;</code>  to add your abstract!</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Hexo/" rel="tag"># Hexo</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/3f6d8e38/" rel="prev" title="Hexo - Add Word Count">
      <i class="fa fa-chevron-left"></i> Hexo - Add Word Count
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/9602864c/" rel="next" title="Logbook">
      Logbook <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#The-Approach"><span class="nav-number">1.</span> <span class="nav-text">The Approach</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Cosmetic-Issue"><span class="nav-number">2.</span> <span class="nav-text">Cosmetic Issue</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">lanVoyager</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lanVoyager</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="Symbols count total">127k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">1:55</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
