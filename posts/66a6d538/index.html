<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-145090763-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-145090763-1');
</script>























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <meta name="description" content="A simple instruction on how to add Gitalk but lengthy discussion on why I selected Gitalk and some further issues with this plugin after implementation.">
<meta name="keywords" content="Hexo">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo - Add Gitalk Comment">
<meta property="og:url" content="https://lanVoyager.github.io/posts/66a6d538/index.html">
<meta property="og:site_name" content="lanVoyager | toHave-N-haveNot">
<meta property="og:description" content="A simple instruction on how to add Gitalk but lengthy discussion on why I selected Gitalk and some further issues with this plugin after implementation.">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://www.dropbox.com/s/bsf7apqj5squnbk/token.png?raw=1">
<meta property="og:image" content="https://www.dropbox.com/s/jx0sskx73342rai/clientID.png?raw=1">
<meta property="og:image" content="https://drive.google.com/uc?export=download&id=1c3YACtDJmX7Wn_mFh5y6G6UJfXLO0Wdp">
<meta property="og:updated_time" content="2020-01-14T18:24:25.472Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo - Add Gitalk Comment">
<meta name="twitter:description" content="A simple instruction on how to add Gitalk but lengthy discussion on why I selected Gitalk and some further issues with this plugin after implementation.">
<meta name="twitter:image" content="https://www.dropbox.com/s/bsf7apqj5squnbk/token.png?raw=1">



  <link rel="alternate" href="/atom.xml" title="lanVoyager | toHave-N-haveNot" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://lanVoyager.github.io/posts/66a6d538/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Hexo - Add Gitalk Comment | lanVoyager | toHave-N-haveNot</title>
  




  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145090763-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-145090763-1');
    }
  </script>









  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">lanVoyager | toHave-N-haveNot</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">大道无形</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



</div>
    </header>

    
  
  

  

  <a href="https://github.com/lanVoyager" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lanVoyager.github.io/posts/66a6d538/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lanVoyager">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lanVoyager | toHave-N-haveNot">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Hexo - Add Gitalk Comment

              
            
          </h1>
        

        <div class="post-meta">
        	


          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-07-16 22:09:17" itemprop="dateCreated datePublished" datetime="2019-07-16T22:09:17-07:00">2019-07-16</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-01-14 11:24:25" itemprop="dateModified" datetime="2020-01-14T11:24:25-07:00">2020-01-14</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/nerdyNotes/" itemprop="url" rel="index"><span itemprop="name">nerdyNotes</span></a></span>

                
                
              
            </span>
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
              	 <span class="post-meta-item-text">WORDS:</span>
              
              <span title="Symbols count in article">4.1k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                 <span class="post-meta-item-text">Reading Time &asymp;</span>
              
              <span title="Reading time">4 mins.</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>A simple instruction on how to add Gitalk but lengthy discussion on why I selected Gitalk and some further issues with this plugin after implementation.</p>
<a id="more"></a>

<h1 id="The-Comment-Plug-In"><a href="#The-Comment-Plug-In" class="headerlink" title="The Comment Plug-In"></a>The Comment Plug-In</h1><p>Today is my day 7 with Hexo. Goal is to add comment feature here. </p>
<p>My requirements:</p>
<ul>
<li>Simple and elegant</li>
<li>Easy to manage</li>
<li>Allow <strong>Anonymous</strong> comments</li>
<li>FREE</li>
</ul>
<p>As always, let’s begin with some google search to find the popular ones. </p>
<ul>
<li><a href="https://github.com/imsun/gitment" rel="external nofollow noopener noreferrer" target="_blank">Gitment</a>: no maintenance anymore –&gt; OUT</li>
<li><a href="https://www.livere.com/" rel="external nofollow noopener noreferrer" target="_blank">LiveRe</a>: a Korean plug-in; it allows people to login with most popular social media account or just use email to comment. Sorry, don’t like its appearance –&gt; OUT</li>
<li><a href="https://www.hypercomments.com/" rel="external nofollow noopener noreferrer" target="_blank">hypercomment</a>: it has everything I wanted but it’s not a free plug-in –&gt; OUT</li>
<li><strong><a href="https://github.com/gitalk/gitalk" rel="external nofollow noopener noreferrer" target="_blank">Gitalk</a></strong>: only problem is that it requires a Github account. –&gt; CHOOSEN as of today</li>
<li><a href="https://valine.js.org/en/index.html" rel="external nofollow noopener noreferrer" target="_blank">Valine</a>: after implemented Gitalk, checked Valine and it seems good. –&gt; will test in the future</li>
</ul>
<span class="lanComment"> 

<p>Updated on August 2, 2019:</p>
<ul>
<li>Valine: it requires to have a <a href="https://leancloud.cn/" rel="external nofollow noopener noreferrer" target="_blank">LeanCloud</a> account. Surprisingly, it accepts international phone number for account registration. However, after successfully proved I am a human via image verification more than 5 times, the website refused to send me verification code to my US number. Fine, you are OUT!</li>
<li><a href="https://disqus.com/" rel="external nofollow noopener noreferrer" target="_blank">Disqus</a>: I just don’t like your appearance. Sorry, OUT!</li>
</ul>
<p>To conclude, Gitalk is the final winner here! </p>
</span>

<h1 id="Gitalk-Implementation"><a href="#Gitalk-Implementation" class="headerlink" title="Gitalk Implementation"></a>Gitalk Implementation</h1><p>Step 1: Register Application on Github</p>
<p><a href="https://github.com/settings/applications/new" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/settings/applications/new</a></p>
<img src="https://www.dropbox.com/s/bsf7apqj5squnbk/token.png?raw=1">

<p>Step 2: Obtain Client ID &amp; Client Secret</p>
<img src="https://www.dropbox.com/s/jx0sskx73342rai/clientID.png?raw=1">

<p>Step 3: I created a new repo to store all the comments. You can skip this step.</p>
<p>Step 4: Gitalk setup</p>
<p>It’s really easy with <code>next</code> theme. At the time of writing this post, my <code>next</code> version is v7.2.0. It comes with all the specifications for Gitalk. So there is no need to change several swig files as one would find from Google search. To implement Gitalk, one just need to change the <code>theme</code> _config.yml as follows:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="string">ture</span></span><br><span class="line"><span class="attr">  github_id:</span> <span class="string">lanVoyager</span> <span class="comment"># GitHub repo owner</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">gitalkHexoComment</span> <span class="comment"># Repository name to store issues</span></span><br><span class="line"><span class="attr">  client_id:</span> <span class="string">obtained</span> <span class="string">from</span> <span class="string">Step</span> <span class="number">2</span> <span class="comment"># GitHub Application Client ID</span></span><br><span class="line"><span class="attr">  client_secret:</span> <span class="string">obtained</span> <span class="string">from</span> <span class="string">Step</span> <span class="number">2</span> <span class="comment"># GitHub Application Client Secret</span></span><br><span class="line"><span class="attr">  admin_user:</span> <span class="string">lanVoyager</span> <span class="comment"># GitHub repo owner and collaborators, only these guys can initialize gitHub issues</span></span><br><span class="line"><span class="attr">  distraction_free_mode:</span> <span class="literal">true</span> <span class="comment"># Facebook-like distraction free mode</span></span><br><span class="line"><span class="attr">  language:</span> <span class="string">[en,</span> <span class="string">zh-CN]</span></span><br></pre></td></tr></table></figure>

<p>Step 5: Blog deployment </p>
<h1 id="Gitalk-Initialization"><a href="#Gitalk-Initialization" class="headerlink" title="Gitalk Initialization"></a>Gitalk Initialization</h1><p>Another issue with Gitalk after implementation?!</p>
<p>It require admin to initialize the comment blocks for each and every post?!?! The good news is that you only need to initialize once and then for each newly pushed post, you have to manually initialize it. Just click it and login your Github.</p>
<p>There is scripts available online which does initialization automatically. I have decided postpone further time &amp; efforts investing into Gitalk. I may switch to Valine. Yes, Valine you are welcome to fail me in other ways. But not today! </p>
<h1 id="Gitalk-Comment-Count-in-Title-Block"><a href="#Gitalk-Comment-Count-in-Title-Block" class="headerlink" title="Gitalk Comment Count in Title Block"></a>Gitalk Comment Count in Title Block</h1><p>Added on August 14, 2019</p>
<p>I don’t like to have a pair of ‘critical’ eyes and being picky here. However, I just found that the comment count icon under the title block does not show ACURATE comment counts under each post with Gitalk. Yesterday, I complained about the word count estimates provided by <code>hexo-symbols-count-time</code>(here) and the very next day, another complain on inaccurate count for comments…Yes, I just can’t withstand BAD data and those things made my soul itching…</p>
<p>Here is the problem:</p>
<img src="https://drive.google.com/uc?export=download&id=1c3YACtDJmX7Wn_mFh5y6G6UJfXLO0Wdp">

<h2 id="Quick-Google-Results"><a href="#Quick-Google-Results" class="headerlink" title="Quick Google Results"></a><strong>Quick Google Results</strong></h2><p>I maybe wrong, but it seems that at the moment (8/14/2019), Gitalk does not provide <code>nexT</code> comment counts. Basically, the two values are not linked. I believe that there is a way to correct it. However, I don’t have the time to dig it out. For now, the comment count will be removed.</p>
<p>FYI, <code>nexT</code> v7.2.0 comment counts seem to be working with (refer to post.swig):</p>
<ul>
<li>facebook_comments</li>
<li>disqus</li>
<li>valine</li>
<li>changyan</li>
</ul>
<h2 id="How-to-Remove-Comment-Icon"><a href="#How-to-Remove-Comment-Icon" class="headerlink" title="How to Remove Comment Icon"></a><strong>How to Remove Comment Icon</strong></h2><p>This can be changed in <code>post.swig</code> (.\themes\next\layout\_marco). Search for <code>if post.comments</code> and remove the entire block.</p>
<span class="lanComment">

<p>For my own record, the backup file with the original comment block is named as post_08142019.swig.</p>
</span>








      
    </div>

    

    
      
    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/Hexo/" rel="tag"># Hexo</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/a6eb593f/" rel="next" title="hexoTips">
                <i class="fa fa-chevron-left"></i> hexoTips
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/9a962e6d/" rel="prev" title="Hexo - Add Site Map">
                Hexo - Add Site Map <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="gitalk-container">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lanVoyager</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">27</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">44</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          

          

          
          

          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#The-Comment-Plug-In"><span class="nav-number">1.</span> <span class="nav-text">The Comment Plug-In</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gitalk-Implementation"><span class="nav-number">2.</span> <span class="nav-text">Gitalk Implementation</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gitalk-Initialization"><span class="nav-number">3.</span> <span class="nav-text">Gitalk Initialization</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gitalk-Comment-Count-in-Title-Block"><span class="nav-number">4.</span> <span class="nav-text">Gitalk Comment Count in Title Block</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Quick-Google-Results"><span class="nav-number">4.1.</span> <span class="nav-text">Quick Google Results</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-Remove-Comment-Icon"><span class="nav-number">4.2.</span> <span class="nav-text">How to Remove Comment Icon</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lanVoyager</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Symbols count total: </span>
    
    <span title="Symbols count total">245k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">Reading time total &asymp;</span>
    
    <span title="Reading time total">3:43</span>
  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a> v7.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  
  













  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.2.0"></script>



  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  

  

  

  


  
    

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">



<script src="//cdn.jsdelivr.net/npm/js-md5@0.7.3/src/md5.min.js"></script>

<script>
  var gitalk = new Gitalk({
    clientID: '43e52cce68cc3ff04af3',
    clientSecret: '509189e8f2ca53f9d6cf38be644b0da3998ddb48',
    repo: 'gitalkHexoComment',
    owner: 'lanVoyager',
    admin: ['lanVoyager'],
    id: md5(location.pathname),
    
      language: 'en,zh-CN',
    
    distractionFreeMode: 'true'
  });
  gitalk.render('gitalk-container');
</script>

  


  




  

  
  <script src="https://www.gstatic.com/firebasejs/4.6.0/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.6.0/firebase-firestore.js"></script>
  
  <script>
    (function () {

      firebase.initializeApp({
        apiKey: 'AIzaSyAEeQcbix_H5fuy3xL6UZ8OV--SRpx2xG0',
        projectId: 'lanvoyagerhexo'
      })

      function getCount(doc, increaseCount) {
        //increaseCount will be false when not in article page

        return doc.get().then(function (d) {
          var count
          if (!d.exists) { //has no data, initialize count
            if (increaseCount) {
              doc.set({
                count: 1
              })
              count = 1
            }
            else {
              count = 0
            }
          }
          else { //has data
            count = d.data().count
            if (increaseCount) {
              if (!(window.localStorage && window.localStorage.getItem(title))) { //if first view this article
                doc.set({ //increase count
                  count: count + 1
                })
                count++
              }
            }
          }
          if (window.localStorage && increaseCount) { //mark as visited
            localStorage.setItem(title, true)
          }

          return count
        })
      }

      function appendCountTo(el) {
        return function (count) {
          $(el).append(
            $('<span>').addClass('post-visitors-count').append(
              $('<span>').addClass('post-meta-divider').text('|')
            ).append(
              $('<span>').addClass('post-meta-item-icon').append(
                $('<i>').addClass('fa fa-users')
              )
              ).append($('<span>').text('Views ' + count))
          )
        }
      }

      var db = firebase.firestore()
      var articles = db.collection('hexoCount')

      //https://hexo.io/docs/variables.html
      var isPost = 'Hexo - Add Gitalk Comment'.length > 0
      var isArchive = '' === 'true'
      var isCategory = ''.length > 0
      var isTag = ''.length > 0

      if (isPost) { //is article page
        var title = 'Hexo - Add Gitalk Comment'
        var doc = articles.doc(title)

        getCount(doc, true).then(appendCountTo($('.post-meta')))
      }
      else if (!isArchive && !isCategory && !isTag) { //is index page
        var titles = [] //array to titles

        var postsstr = '' //if you have a better way to get titles of posts, please change it
        eval(postsstr)

        var promises = titles.map(function (title) {
          return articles.doc(title)
        }).map(function (doc) {
          return getCount(doc)
        })
        Promise.all(promises).then(function (counts) {
          var metas = $('.post-meta')
          counts.forEach(function (val, idx) {
            appendCountTo(metas[idx])(val)
          })
        })
      }
    })()
  </script>


  

  

  

  

  

  

  

  

  

  

  

  


  

<script type="text/javascript" src="/js/lanAudioPlayer.js"></script>

</body>
</html>
